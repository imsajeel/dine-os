<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Staff Time Clock</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Pulse Animation for Active Status */
        @keyframes pulse-ring {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
        }
        .active-ring { animation: pulse-ring 2s cubic-bezier(0.24, 0, 0.38, 1) infinite; }

        /* Login Animations */
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.5); }
            100% { transform: scale(1); }
        }
        .animate-pop { animation: pop 0.2s ease-out; }
        
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
        
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 h-screen overflow-hidden">

    <!-- VIEW 1: LOGIN SCREEN -->
    <div id="view-login" class="absolute inset-0 z-50 bg-slate-900 text-white flex flex-col items-center justify-center">
        <!-- Background Pattern -->
        <div class="absolute inset-0 opacity-10 pointer-events-none" style="background-image: radial-gradient(#4b5563 1px, transparent 1px); background-size: 24px 24px;"></div>

        <div class="w-full max-w-sm px-6 py-8 relative z-10 flex flex-col items-center">
            <!-- Header -->
            <div class="mb-10 text-center">
                <div class="w-20 h-20 bg-blue-600 rounded-2xl flex items-center justify-center text-4xl font-bold shadow-lg shadow-blue-900/50 mx-auto mb-4">
                    <i class="ph-bold ph-clock-user"></i>
                </div>
                <h1 class="text-2xl font-bold tracking-tight">Time Clock</h1>
                <p class="text-slate-400 text-sm mt-1">Enter PIN (Try 1234)</p>
            </div>

            <!-- PIN Display -->
            <div id="pin-display" class="flex gap-4 mb-10 justify-center h-4">
                <div class="w-4 h-4 rounded-full border-2 border-slate-600 bg-transparent transition-colors duration-200"></div>
                <div class="w-4 h-4 rounded-full border-2 border-slate-600 bg-transparent transition-colors duration-200"></div>
                <div class="w-4 h-4 rounded-full border-2 border-slate-600 bg-transparent transition-colors duration-200"></div>
                <div class="w-4 h-4 rounded-full border-2 border-slate-600 bg-transparent transition-colors duration-200"></div>
            </div>

            <!-- Numeric Keypad -->
            <div class="grid grid-cols-3 gap-4 w-full max-w-[280px]">
                <!-- 1-9 generated by JS for brevity in logic, keeping hardcoded here for visual reference -->
                <button onclick="addPin(1)" class="h-16 rounded-full bg-slate-800 hover:bg-slate-700 active:bg-blue-600 border border-slate-700 text-xl font-semibold transition-all">1</button>
                <button onclick="addPin(2)" class="h-16 rounded-full bg-slate-800 hover:bg-slate-700 active:bg-blue-600 border border-slate-700 text-xl font-semibold transition-all">2</button>
                <button onclick="addPin(3)" class="h-16 rounded-full bg-slate-800 hover:bg-slate-700 active:bg-blue-600 border border-slate-700 text-xl font-semibold transition-all">3</button>
                <button onclick="addPin(4)" class="h-16 rounded-full bg-slate-800 hover:bg-slate-700 active:bg-blue-600 border border-slate-700 text-xl font-semibold transition-all">4</button>
                <button onclick="addPin(5)" class="h-16 rounded-full bg-slate-800 hover:bg-slate-700 active:bg-blue-600 border border-slate-700 text-xl font-semibold transition-all">5</button>
                <button onclick="addPin(6)" class="h-16 rounded-full bg-slate-800 hover:bg-slate-700 active:bg-blue-600 border border-slate-700 text-xl font-semibold transition-all">6</button>
                <button onclick="addPin(7)" class="h-16 rounded-full bg-slate-800 hover:bg-slate-700 active:bg-blue-600 border border-slate-700 text-xl font-semibold transition-all">7</button>
                <button onclick="addPin(8)" class="h-16 rounded-full bg-slate-800 hover:bg-slate-700 active:bg-blue-600 border border-slate-700 text-xl font-semibold transition-all">8</button>
                <button onclick="addPin(9)" class="h-16 rounded-full bg-slate-800 hover:bg-slate-700 active:bg-blue-600 border border-slate-700 text-xl font-semibold transition-all">9</button>
                <button onclick="clearPin()" class="h-16 rounded-full text-red-400 hover:bg-slate-800 transition-colors text-sm font-semibold">Clear</button>
                <button onclick="addPin(0)" class="h-16 rounded-full bg-slate-800 hover:bg-slate-700 active:bg-blue-600 border border-slate-700 text-xl font-semibold transition-all">0</button>
                <button onclick="deleteDigit()" class="h-16 rounded-full text-slate-400 hover:bg-slate-800 transition-colors flex items-center justify-center"><i class="ph-bold ph-backspace text-2xl"></i></button>
            </div>
        </div>
    </div>

    <!-- VIEW 2: DASHBOARD (Initially Hidden) -->
    <div id="view-dashboard" class="hidden h-full flex-col">
        <!-- Navbar -->
        <header class="bg-white border-b border-slate-200 h-16 shrink-0 flex items-center justify-between px-6 z-10">
            <div class="flex items-center gap-3">
                <button class="p-2 -ml-2 text-slate-400 hover:text-slate-600 rounded-full transition-colors">
                    <i class="ph-bold ph-list text-xl"></i>
                </button>
                <h1 class="font-bold text-lg">Staff Portal</h1>
            </div>
            
            <div class="flex items-center gap-4">
                <!-- User Profile -->
                <div class="flex items-center gap-3 bg-slate-100 py-1.5 px-3 rounded-full">
                    <div class="w-8 h-8 rounded-full bg-slate-300 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=100&q=80" alt="User" class="w-full h-full object-cover">
                    </div>
                    <div class="hidden sm:block text-sm">
                        <p class="font-bold leading-none">Alex Johnson</p>
                        <p class="text-xs text-slate-500 leading-none mt-1">Server â€¢ ID #8821</p>
                    </div>
                </div>
                <!-- Logout Button -->
                <button onclick="logout()" class="p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors" title="Logout">
                    <i class="ph-bold ph-sign-out text-xl"></i>
                </button>
            </div>
        </header>

        <main class="flex-1 flex flex-col md:flex-row overflow-hidden">
            
            <!-- Left Panel: Clock & Actions -->
            <div class="flex-1 flex flex-col items-center justify-center p-6 md:p-12 relative overflow-hidden bg-white md:border-r border-slate-200">
                
                <!-- Dynamic Background Elements -->
                <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"></div>
                
                <!-- Digital Clock -->
                <div class="text-center mb-12 relative z-10">
                    <p class="text-slate-400 font-medium text-sm tracking-widest uppercase mb-2" id="current-date">MONDAY, OCT 24</p>
                    <div class="font-mono text-6xl md:text-8xl font-bold text-slate-800 tracking-tighter" id="digital-clock">
                        14:38:22
                    </div>
                </div>

                <!-- Status Badge -->
                <div id="status-badge" class="mb-10 px-6 py-2 rounded-full bg-slate-100 text-slate-500 font-bold text-sm tracking-wide border border-slate-200 flex items-center gap-2 transition-all duration-300">
                    <div class="w-2.5 h-2.5 rounded-full bg-slate-400"></div>
                    <span>NOT CLOCKED IN</span>
                </div>

                <!-- Action Buttons Grid -->
                <div class="grid grid-cols-2 gap-4 w-full max-w-lg">
                    <!-- Clock In -->
                    <button 
                        id="btn-clock-in"
                        onclick="handleAction('in')"
                        class="group relative col-span-2 h-24 bg-slate-900 hover:bg-slate-800 active:scale-[0.98] text-white rounded-2xl flex items-center justify-center gap-4 transition-all shadow-xl shadow-slate-200"
                    >
                        <div class="w-12 h-12 rounded-xl bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform">
                            <i class="ph-fill ph-sign-in text-2xl text-green-400"></i>
                        </div>
                        <div class="text-left">
                            <span class="block font-bold text-xl">Clock In</span>
                            <span class="text-xs text-slate-400">Start your shift</span>
                        </div>
                    </button>

                    <!-- Break -->
                    <button 
                        id="btn-break"
                        onclick="handleAction('break')"
                        disabled
                        class="h-20 bg-white border-2 border-slate-100 hover:border-blue-200 hover:bg-blue-50 text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-2xl flex flex-col items-center justify-center gap-1 transition-all"
                    >
                        <i class="ph-bold ph-coffee text-2xl mb-1"></i>
                        <span class="font-bold text-sm">Start Break</span>
                    </button>

                    <!-- Clock Out -->
                    <button 
                        id="btn-clock-out"
                        onclick="handleAction('out')"
                        disabled
                        class="h-20 bg-white border-2 border-slate-100 hover:border-red-200 hover:bg-red-50 text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-2xl flex flex-col items-center justify-center gap-1 transition-all"
                    >
                        <i class="ph-bold ph-sign-out text-2xl mb-1"></i>
                        <span class="font-bold text-sm">Clock Out</span>
                    </button>
                </div>

                <!-- Helper Text -->
                <p class="mt-8 text-xs text-slate-400 max-w-xs text-center">
                    Need to adjust a previous shift? Contact your manager to edit time logs.
                </p>
            </div>

            <!-- Right Panel: Activity Log -->
            <div class="w-full md:w-96 bg-slate-50 flex flex-col border-t md:border-t-0 h-1/3 md:h-full shrink-0">
                <div class="p-6 border-b border-slate-200 bg-white/50 backdrop-blur-sm sticky top-0">
                    <h2 class="font-bold text-slate-700 flex items-center gap-2">
                        <i class="ph-bold ph-clock-counter-clockwise"></i>
                        Recent Activity
                    </h2>
                </div>
                
                <div class="flex-1 overflow-y-auto p-4 space-y-3" id="activity-log">
                    <div class="text-center py-10 opacity-50">
                        <p class="text-sm text-slate-400">No activity today</p>
                    </div>
                </div>

                <!-- Stats Summary -->
                <div class="p-6 bg-white border-t border-slate-200">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm text-slate-500">Total Hours Today</span>
                        <span class="font-mono font-bold text-lg text-slate-800" id="total-hours">0h 00m</span>
                    </div>
                    <div class="w-full bg-slate-100 rounded-full h-2 overflow-hidden">
                        <div class="bg-blue-500 h-full rounded-full w-0 transition-all duration-1000" id="progress-bar"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Confirmation Modal -->
    <div id="modal" class="fixed inset-0 z-50 bg-black/40 backdrop-blur-sm hidden items-center justify-center p-4 animate-fade-in">
        <div class="bg-white rounded-3xl shadow-2xl w-full max-w-sm p-6 transform scale-95 transition-all" id="modal-content">
            <div class="w-16 h-16 rounded-full bg-green-100 text-green-600 flex items-center justify-center mx-auto mb-4">
                <i class="ph-fill ph-check text-3xl"></i>
            </div>
            <h3 class="text-xl font-bold text-center text-slate-800 mb-2" id="modal-title">Success</h3>
            <p class="text-center text-slate-500 mb-6" id="modal-msg">Action recorded successfully.</p>
            <button onclick="closeModal()" class="w-full py-3 bg-slate-900 text-white rounded-xl font-bold hover:bg-slate-800 transition-colors">Done</button>
        </div>
    </div>

    <script>
        // --- State ---
        let pin = "";
        const CORRECT_PIN = "1234";
        
        let state = {
            status: 'out', // out, in, break
            logs: [],
            shiftStartTime: null
        };

        const els = {
            loginView: document.getElementById('view-login'),
            dashboardView: document.getElementById('view-dashboard'),
            pinDots: document.querySelectorAll('#pin-display div'),
            clock: document.getElementById('digital-clock'),
            date: document.getElementById('current-date'),
            statusBadge: document.getElementById('status-badge'),
            btnIn: document.getElementById('btn-clock-in'),
            btnOut: document.getElementById('btn-clock-out'),
            btnBreak: document.getElementById('btn-break'),
            logContainer: document.getElementById('activity-log'),
            modal: document.getElementById('modal'),
            modalContent: document.getElementById('modal-content'),
            totalHours: document.getElementById('total-hours'),
            progressBar: document.getElementById('progress-bar')
        };

        // --- Clock Logic ---
        function updateTime() {
            const now = new Date();
            els.clock.textContent = now.toLocaleTimeString('en-US', { hour12: false });
            els.date.textContent = now.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' });
        }
        setInterval(updateTime, 1000);
        updateTime();

        // --- Login Logic ---
        function updateDots() {
            els.pinDots.forEach((dot, index) => {
                if (index < pin.length) {
                    dot.classList.remove('bg-transparent', 'border-slate-600');
                    dot.classList.add('bg-blue-500', 'border-blue-500', 'animate-pop');
                } else {
                    dot.classList.add('bg-transparent', 'border-slate-600');
                    dot.classList.remove('bg-blue-500', 'border-blue-500', 'animate-pop');
                }
            });
        }

        window.addPin = (digit) => {
            if (pin.length < 4) {
                pin += digit;
                updateDots();
                if (pin.length === 4) setTimeout(checkPin, 300);
            }
        };

        window.deleteDigit = () => {
            if (pin.length > 0) {
                pin = pin.slice(0, -1);
                updateDots();
            }
        };

        window.clearPin = () => {
            pin = "";
            updateDots();
        };

        function checkPin() {
            if (pin === CORRECT_PIN) {
                // Success Login
                pin = "";
                updateDots();
                els.loginView.classList.add('hidden');
                els.dashboardView.classList.remove('hidden');
                els.dashboardView.classList.add('flex');
            } else {
                // Error Shake
                const container = document.querySelector('#view-login .max-w-sm');
                container.classList.add('shake');
                els.pinDots.forEach(dot => {
                    dot.classList.remove('bg-blue-500', 'border-blue-500');
                    dot.classList.add('bg-red-500', 'border-red-500');
                });
                setTimeout(() => {
                    container.classList.remove('shake');
                    clearPin();
                    els.pinDots.forEach(dot => {
                        dot.classList.remove('bg-red-500', 'border-red-500');
                        dot.classList.add('bg-transparent', 'border-slate-600');
                    });
                }, 500);
            }
        }

        window.logout = () => {
            els.dashboardView.classList.add('hidden');
            els.dashboardView.classList.remove('flex');
            els.loginView.classList.remove('hidden');
        };

        // --- Dashboard Actions ---
        window.handleAction = (action) => {
            const now = new Date();
            const timeStr = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

            let logEntry = {
                id: Date.now(),
                time: timeStr,
                type: action,
                label: ''
            };

            if (action === 'in') {
                if(state.status === 'in') return;
                state.status = 'in';
                state.shiftStartTime = now;
                logEntry.label = 'Clocked In';
                showModal('Shift Started', `You clocked in at ${timeStr}`);
            } else if (action === 'out') {
                state.status = 'out';
                logEntry.label = 'Clocked Out';
                showModal('Shift Ended', `You clocked out at ${timeStr}`);
                
                // Optional: Auto logout after clocking out
                setTimeout(logout, 2000); 
            } else if (action === 'break') {
                if (state.status === 'break') {
                    state.status = 'in';
                    logEntry.type = 'break-end';
                    logEntry.label = 'Break Ended';
                    showModal('Welcome Back', 'Break ended.');
                } else {
                    state.status = 'break';
                    logEntry.label = 'Break Started';
                    showModal('Enjoy your break', 'Break started.');
                }
            }

            state.logs.unshift(logEntry);
            updateUI();
        };

        function updateUI() {
            // 1. Update Buttons & Badge (Same logic as before)
            if (state.status === 'out') {
                els.statusBadge.className = "mb-10 px-6 py-2 rounded-full bg-slate-100 text-slate-500 font-bold text-sm tracking-wide border border-slate-200 flex items-center gap-2";
                els.statusBadge.innerHTML = `<div class="w-2.5 h-2.5 rounded-full bg-slate-400"></div><span>NOT CLOCKED IN</span>`;
                els.btnIn.disabled = false;
                els.btnIn.classList.remove('opacity-50', 'cursor-not-allowed');
                els.btnOut.disabled = true;
                els.btnBreak.disabled = true;
                els.btnIn.querySelector('span.text-xl').textContent = "Clock In";
            } else if (state.status === 'in') {
                els.statusBadge.className = "mb-10 px-6 py-2 rounded-full bg-green-50 text-green-600 font-bold text-sm tracking-wide border border-green-200 flex items-center gap-2 active-ring";
                els.statusBadge.innerHTML = `<div class="w-2.5 h-2.5 rounded-full bg-green-500"></div><span>CURRENTLY WORKING</span>`;
                els.btnIn.disabled = true;
                els.btnIn.classList.add('opacity-50', 'cursor-not-allowed');
                els.btnIn.querySelector('span.text-xl').textContent = "Clocked In";
                els.btnOut.disabled = false;
                els.btnBreak.disabled = false;
                els.btnBreak.querySelector('span').textContent = "Start Break";
                els.btnBreak.classList.remove('bg-amber-50', 'border-amber-200', 'text-amber-700');
                els.btnBreak.classList.add('bg-white');
            } else if (state.status === 'break') {
                els.statusBadge.className = "mb-10 px-6 py-2 rounded-full bg-amber-50 text-amber-600 font-bold text-sm tracking-wide border border-amber-200 flex items-center gap-2";
                els.statusBadge.innerHTML = `<div class="w-2.5 h-2.5 rounded-full bg-amber-500 animate-pulse"></div><span>ON BREAK</span>`;
                els.btnIn.disabled = true;
                els.btnOut.disabled = true;
                els.btnBreak.querySelector('span').textContent = "End Break";
                els.btnBreak.classList.add('bg-amber-50', 'border-amber-200', 'text-amber-700');
                els.btnBreak.classList.remove('bg-white');
            }

            // 2. Update Log
            if (state.logs.length === 0) {
                els.logContainer.innerHTML = `<div class="text-center py-10 opacity-50"><p class="text-sm text-slate-400">No activity today</p></div>`;
            } else {
                els.logContainer.innerHTML = state.logs.map(log => {
                    let icon = 'ph-check';
                    let color = 'bg-slate-200 text-slate-600';
                    if (log.type === 'in') { icon = 'ph-sign-in'; color = 'bg-green-100 text-green-600'; }
                    if (log.type === 'out') { icon = 'ph-sign-out'; color = 'bg-red-100 text-red-600'; }
                    if (log.type.includes('break')) { icon = 'ph-coffee'; color = 'bg-amber-100 text-amber-600'; }

                    return `
                    <div class="flex items-center gap-4 p-3 bg-white rounded-xl border border-slate-100 shadow-sm animate-fade-in">
                        <div class="w-10 h-10 rounded-lg ${color} flex items-center justify-center shrink-0">
                            <i class="ph-bold ${icon} text-lg"></i>
                        </div>
                        <div class="flex-1">
                            <p class="font-bold text-slate-700 text-sm">${log.label}</p>
                            <p class="text-xs text-slate-400">Successfully recorded</p>
                        </div>
                        <div class="font-mono font-medium text-slate-500 text-sm bg-slate-50 px-2 py-1 rounded">
                            ${log.time}
                        </div>
                    </div>
                    `;
                }).join('');
            }
            
            // 3. Update Stats (Mock)
            if (state.logs.length > 0) {
                els.totalHours.textContent = "2h 15m";
                els.progressBar.style.width = "25%";
            }
        }

        // --- Modal ---
        function showModal(title, msg) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-msg').textContent = msg;
            els.modal.classList.remove('hidden');
            els.modal.classList.add('flex');
            requestAnimationFrame(() => {
                els.modalContent.classList.remove('scale-95');
                els.modalContent.classList.add('scale-100');
            });
        }

        window.closeModal = () => {
            els.modal.classList.add('hidden');
            els.modal.classList.remove('flex');
            els.modalContent.classList.add('scale-95');
            els.modalContent.classList.remove('scale-100');
        };

    </script>
</body>
</html>